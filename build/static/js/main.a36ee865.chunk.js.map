{"version":3,"sources":["redux/calculator/calculator-reducer.js","redux/product/product-redusers.jsx","redux/store.js","components/Routes/publicRoute.js","components/Routes/privateRoute.js","App.js","index.js","routes.js","redux/product/product-actions.jsx","redux/calculator/calculator-action.js","redux/registration/AxiosInstance.js","redux/registration/Selectors.js","redux/registration/Operations.js","components/common/Loader/index.jsx","redux/registration/UserSlice.js"],"names":["calcData","createReducer","kcal","productsNotRecommended","calcSuccess","_","payload","error","calcError","loading","calcRequest","combineReducers","diaryInfoState","email","date","products","dayNorm","totalKcalPerDay","kcalRemain","percentage","diaryInfo","productActions","addProductSuccess","state","dateEatenProductsSuccess","deleteProductIdSuccess","newArray","filter","product","id","onLogoutSuccess","addProductRequest","action","addProductError","deleteProductIdError","onLogoutRequest","dateEatenProductsRequest","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistConfig","key","storage","whitelist","rootReducer","user","userReducer","productReducer","persistedReducer","persistReducer","store","configureStore","reducer","persistor","persistStore","PublicRoute","Component","component","redirectTo","routeProps","isLogin","useSelector","getIsLoggedOn","render","props","restricted","to","PrivateRoute","routes","main","AuthView","lazy","CalculatorView","DiaryView","MainPageView","RegistrationView","App","dispatch","useDispatch","useEffect","localStorage","getItem","getUser","autoClose","fallback","Loader","path","exact","calculator","auth","diary","reg","ReactDOM","StrictMode","document","getElementById","createAction","dateEatenProductsError","deleteProductIdRequest","axiosInstance","axios","create","baseURL","interceptors","request","use","config","token","console","log","headers","Authorization","isLoggedOn","getUserName","name","getState","a","onSignUpRequest","get","response","data","onGetUser","onLoginFailure","message","login","onLoginRequest","post","then","setItem","onLoginSuccess","catch","signUp","password","onSignUpSuccess","onSignUpFailure","logout","removeItem","onLogoutFailure","useStyles","makeStyles","root","position","top","left","transform","color","classes","className","createSlice","initialState","isLoading","reducers","actions","onLogout"],"mappings":"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","file":"static/js/main.a36ee865.chunk.js","sourcesContent":["import { createReducer } from '@reduxjs/toolkit'\nimport { combineReducers } from 'redux'\nimport { calcRequest, calcSuccess, calcError } from './calculator-action'\n\nconst initialState = { kcal: null, productsNotRecommended: null }\n\nconst calcData = createReducer(initialState, {\n  [calcSuccess]: (_, { payload }) => payload,\n})\n\nconst error = createReducer(null, {\n  [calcError]: (_, { payload }) => payload,\n})\n\nconst loading = createReducer(false, {\n  [calcRequest]: () => true,\n  [calcSuccess]: () => false,\n  [calcError]: () => false,\n})\nexport default combineReducers({ calcData, error, loading })\n","import { combineReducers } from 'redux'\r\nimport { createReducer } from '@reduxjs/toolkit'\r\nimport productActions from './product-actions'\r\nimport { onLogoutSuccess, onLogoutRequest } from '../registration/UserSlice'\r\n\r\nconst diaryInfoState = {\r\n  email: '',\r\n  date: '',\r\n  products: [],\r\n  dayNorm: 0,\r\n  totalKcalPerDay: 0,\r\n  kcalRemain: 0,\r\n  percentage: null,\r\n  productsNotRecommended: [],\r\n}\r\n\r\nconst diaryInfo = createReducer(diaryInfoState, {\r\n  [productActions.addProductSuccess]: (state, { payload }) => {\r\n    return {\r\n      ...state,\r\n      products: [payload, ...state.products],\r\n    }\r\n  },\r\n  [productActions.dateEatenProductsSuccess]: (_, { payload }) => payload,\r\n  [productActions.deleteProductIdSuccess]: (state, { payload }) => {\r\n    const oldArray = state.products\r\n    const newArray = oldArray.filter(product => product.id !== payload)\r\n    const newState = {\r\n      ...state,\r\n      products: newArray,\r\n    }\r\n    return newState\r\n  },\r\n  [onLogoutSuccess]: () => diaryInfoState,\r\n})\r\n\r\nconst loading = createReducer(false, {\r\n  [productActions.addProductRequest]: (state, action) => true,\r\n  [productActions.addProductSuccess]: (state, action) => false,\r\n  [productActions.addProductError]: (state, action) => false,\r\n})\r\n\r\nconst error = createReducer(null, {\r\n  [productActions.deleteProductIdError]: (_, { payload }) => payload,\r\n  [productActions.addProductRequest]: () => null,\r\n  [onLogoutRequest]: () => null,\r\n  [productActions.dateEatenProductsRequest]: () => null,\r\n})\r\n\r\nexport default combineReducers({\r\n  diaryInfo,\r\n  loading,\r\n  error,\r\n  // dayInfo\r\n})\r\n","import {\n  configureStore,\n  getDefaultMiddleware,\n  combineReducers,\n} from '@reduxjs/toolkit'\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist'\nimport storage from 'redux-persist/lib/storage'\nimport calcData from './calculator/calculator-reducer'\nimport userReducer from './registration/UserSlice'\nimport productReducer from './product/product-redusers'\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n]\nconst persistConfig = {\n  key: 'user',\n  storage,\n  whitelist: ['token'],\n}\n\nconst rootReducer = combineReducers({\n  kcal: calcData,\n  user: userReducer,\n  products: productReducer,\n})\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\nexport const store = configureStore({\n  reducer: persistedReducer,\n  middleware,\n})\n\nexport const persistor = persistStore(store)\n","import { Route, Redirect } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport { getIsLoggedOn } from '../../redux/registration/Selectors'\r\n\r\nconst PublicRoute = ({ component: Component, redirectTo, ...routeProps }) => {\r\n  const isLogin = useSelector(getIsLoggedOn)\r\n  return (\r\n    <Route\r\n      {...routeProps}\r\n      render={props =>\r\n        isLogin && routeProps.restricted ? (\r\n          <Redirect to={redirectTo} />\r\n        ) : (\r\n          <Component {...props} />\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default PublicRoute\r\n","import { Route, Redirect } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport { getIsLoggedOn } from '../../redux/registration/Selectors'\r\nimport routes from '../../routes'\r\n\r\nconst PrivateRoute = props => {\r\n  const isLogin = useSelector(getIsLoggedOn)\r\n\r\n  return isLogin ? <Route {...props} /> : <Redirect to={routes.main} />\r\n}\r\n\r\nexport default PrivateRoute\r\n","import { lazy } from 'react'\r\nimport { Suspense, useEffect } from 'react'\r\nimport { Switch } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport routes from './routes'\r\nimport { getUser } from './redux/registration/Operations'\r\nimport { ToastContainer } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport PublicRoute from './components/Routes/publicRoute'\r\nimport PrivateRoute from './components/Routes/privateRoute'\r\nimport Loader from './components/common/Loader'\r\n\r\nconst AuthView = lazy(\r\n  () => import('./views/AuthView') /* webpackChunkName: \"AuthView\" */,\r\n)\r\nconst CalculatorView = lazy(\r\n  () =>\r\n    import('./views/CalculatorView') /* webpackChunkName: \"CalculatorView\" */,\r\n)\r\nconst DiaryView = lazy(\r\n  () => import('./views/DiaryView') /* webpackChunkName: \"DiaryView\" */,\r\n)\r\nconst MainPageView = lazy(\r\n  () => import('./views/MainPageView') /* webpackChunkName: \"MainPageView\" */,\r\n)\r\nconst RegistrationView = lazy(\r\n  () =>\r\n    import(\r\n      './views/RegistrationView'\r\n    ) /* webpackChunkName: \"RegiastrationView\" */,\r\n)\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token')) dispatch(getUser())\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer autoClose={2000} />\r\n      <Suspense fallback={<Loader />}>\r\n        <Switch>\r\n          <PublicRoute\r\n            path={routes.main}\r\n            exact\r\n            restricted\r\n            component={MainPageView}\r\n            redirectTo={routes.calculator}\r\n          />\r\n          <PublicRoute\r\n            path={routes.auth}\r\n            restricted\r\n            component={AuthView}\r\n            redirectTo={routes.diary}\r\n          />\r\n          <PublicRoute\r\n            path={routes.reg}\r\n            restricted\r\n            component={RegistrationView}\r\n            redirectTo={routes.diary}\r\n          />\r\n          <PrivateRoute path={routes.calculator} component={CalculatorView} />\r\n          <PrivateRoute path={routes.diary} component={DiaryView} />\r\n        </Switch>\r\n      </Suspense>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport { PersistGate } from 'redux-persist/integration/react'\r\nimport { store, persistor } from './redux/store'\r\nimport './index.scss'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <React.StrictMode>\r\n      <Provider store={store}>\r\n        <PersistGate loading={null} persistor={persistor}>\r\n          <App />\r\n        </PersistGate>\r\n      </Provider>\r\n    </React.StrictMode>\r\n  </BrowserRouter>,\r\n  document.getElementById('root'),\r\n)\r\n","/* eslint-disable import/no-anonymous-default-export */\r\nexport default {\r\n  main: '/',\r\n  auth: '/auth',\r\n  reg: '/registration',\r\n  calculator: '/calculator',\r\n  diary: '/diary',\r\n}\r\n","import { createAction } from '@reduxjs/toolkit'\r\nconst addProductRequest = createAction('products/addProductRequest')\r\nconst addProductSuccess = createAction('products/addProductSuccess')\r\nconst addProductError = createAction('products/addProductError')\r\n\r\nconst dateEatenProductsRequest = createAction('products/dateEatenProductsRequest')\r\nconst dateEatenProductsSuccess = createAction('products/dateEatenProductsSuccess')\r\nconst dateEatenProductsError = createAction('products/dateEatenProductsError')\r\n\r\nconst deleteProductIdRequest = createAction('products/deleteProductIdRequest')\r\nconst deleteProductIdSuccess = createAction('products/deleteProductIdSuccess')\r\nconst deleteProductIdError = createAction('products/deleteProductIdError')\r\n\r\nconst productActions = {\r\n  addProductRequest,\r\n  addProductSuccess,\r\n  addProductError,\r\n  dateEatenProductsRequest,\r\n  dateEatenProductsSuccess,\r\n  dateEatenProductsError,\r\n  deleteProductIdRequest,\r\n  deleteProductIdSuccess,\r\n  deleteProductIdError\r\n}\r\nexport default productActions\r\n","import { createAction } from '@reduxjs/toolkit'\n\nexport const calcRequest = createAction('contact/AddContactRequest')\nexport const calcSuccess = createAction('contact/addContactSuccess')\nexport const calcError = createAction('contact/addContactError')\n","import axios from 'axios'\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: 'https://slim-mom-backend.herokuapp.com',\r\n  // baseURL: 'http://localhost:3001',\r\n})\r\naxiosInstance.interceptors.request.use(config => {\r\n  const token = localStorage.getItem('token')\r\n  console.log(token)\r\n  config.headers.Authorization = token ? `Bearer ${token}` : ''\r\n  return config\r\n})\r\nexport default axiosInstance\r\n","// export const notValidatedName = state => name =>\n//   state.contacts.items.some(item => item.name === name)\n\nexport const getIsLoggedOn = state => state.user.isLoggedOn\nexport const getUserName = state => state.user.name\nexport const getToken = state => state.user.token\n","import axiosInstance from './AxiosInstance'\r\n// import axios from 'axios'\r\n\r\nimport {\r\n  onSignUpRequest,\r\n  onSignUpSuccess,\r\n  onSignUpFailure,\r\n  onLoginSuccess,\r\n  onLoginRequest,\r\n  onLoginFailure,\r\n  onLogoutRequest,\r\n  onLogoutSuccess,\r\n  onLogoutFailure,\r\n  onGetUser,\r\n} from './UserSlice'\r\n\r\nexport const getUser = () => async (dispatch, getState) => {\r\n  dispatch(onSignUpRequest())\r\n\r\n  try {\r\n    const response = await axiosInstance.get('/users/current')\r\n    console.log('response.data from getUser', response.data)\r\n\r\n    dispatch(onGetUser(response.data))\r\n  } catch (error) {\r\n    dispatch(onLoginFailure(error.message))\r\n  }\r\n}\r\n\r\nexport const login = payload => (dispatch, getState) => {\r\n  dispatch(onLoginRequest())\r\n  axiosInstance\r\n    .post('/users/login', payload)\r\n    .then(({ data }) => {\r\n      localStorage.setItem('token', data.token)\r\n      dispatch(onLoginSuccess(data))\r\n    })\r\n    .catch(error => {\r\n      dispatch(onLoginFailure(error.message))\r\n    })\r\n}\r\n\r\nexport const signUp = payload => (dispatch, getState) => {\r\n  console.log(\"log from signUp, this is 'payload':\", payload)\r\n  const { name, email, password } = payload\r\n  dispatch(onSignUpRequest())\r\n  axiosInstance\r\n    .post('/users/signup', { name, email, password })\r\n    .then(({ data }) => {\r\n      localStorage.setItem('token', data.token)\r\n      dispatch(onSignUpSuccess(data))\r\n    })\r\n    .catch(error => {\r\n      dispatch(onSignUpFailure(error.message))\r\n    })\r\n}\r\n\r\nexport const logout = payload => (dispatch, getState) => {\r\n  dispatch(onLogoutRequest())\r\n\r\n  axiosInstance\r\n    .post('/users/logout', payload)\r\n    .then(() => {\r\n      localStorage.removeItem('token')\r\n      dispatch(onLogoutSuccess())\r\n    })\r\n    .catch(error => dispatch(onLogoutFailure(error.message)))\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left:'50%',\r\n    transform: 'translate(-50%,-50%)',\r\n    color: '#FC842D',\r\n  },\r\n}));\r\n\r\nexport default function Loader() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <CircularProgress color= \"inherit\" />\r\n    </div>\r\n  );\r\n}","import { createSlice } from '@reduxjs/toolkit'\n\nconst initialState = {\n  name: '',\n  email: '',\n  token: '',\n  isLoggedOn: false,\n  isLoading: false,\n  error: '',\n}\n\nconst { actions, reducer } = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    onSignUpRequest: state => {\n      state.isLoading = true\n    },\n\n    onSignUpSuccess: (state, { payload }) => {\n      state.name = payload.name\n      state.email = payload.email\n      state.token = payload.token\n      state.isLoggedOn = !!payload.token\n    },\n    onSignUpFailure: (state, { payload }) => {\n      state.error = payload.message\n      state.isLoggedOn = false\n      state.isLoading = false\n    },\n\n    onLoginRequest: state => {\n      state.isLoading = true\n    },\n\n    onLoginSuccess: (state, { payload }) => {\n      state.name = payload.name\n      state.email = payload.email\n      state.token = payload.token\n      state.isLoggedOn = true\n      state.isLoading = false\n    },\n\n    onLoginFailure: (state, { payload }) => {\n      state.error = payload.message\n      state.isLoggedOn = false\n      state.isLoading = false\n    },\n\n    onLogoutRequest: state => {\n      state.isLoading = true\n    },\n\n    onLogoutSuccess: (state, { payload }) => {\n      state.name = ''\n      state.email = ''\n      state.token = ''\n      state.isLoading = false\n      state.isLoggedOn = false\n    },\n\n    onLogoutFailure: (state, { payload }) => {\n      state.error = payload.message\n      state.isLoading = false\n    },\n\n    onGetUser: (state, { payload }) => {\n      state.name = payload.name\n      state.email = payload.email\n      state.isLoggedOn = true\n      state.isLoading = false\n    },\n  },\n})\n\nexport const {\n  onSignUpRequest,\n  onSignUpSuccess,\n  onSignUpFailure,\n  onLogout,\n  onGetUser,\n  onLoginRequest,\n  onLoginSuccess,\n  onLoginFailure,\n  onLogoutRequest,\n  onLogoutSuccess,\n  onLogoutFailure,\n} = actions\nconsole.log(actions)\nexport default reducer\n"],"sourceRoot":""}